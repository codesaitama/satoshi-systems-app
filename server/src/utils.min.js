function errorMiddleware(error, req, res, next) {
    let { status = 500, message, data } = error;

    console.log(`[Error] ${error}`);

    // If status code is 500 - change the message to Intrnal server error
    message = status === 500 || !message ? 'Internal server error' : message;

    error = {
        type: 'error',
        status,
        message,
        ...(data) && data
    }

    res.status(status).send(error);
}

const multipleColumnSet = (object) => {
    if (typeof object !== 'object') {
        throw new Error('Invalid input');
    }

    const keys = Object.keys(object);
    const values = Object.values(object);

    columnSet = keys.map(key => `${key} = ?`).join(', ');

    return {
        columnSet,
        values
    }
}

const AuthType = {cookie: 'COOKIE', bearer: 'BEARER'};
const Roles = {user: 'user', admin: 'admin', superadmin: 'superadmin'}
const hiddenDecodeKey = 'adfc944d-bc14-4e25-9b61-5d0d271ea7f5'

module.exports = {multipleColumnSet, errorMiddleware, AuthType, hiddenDecodeKey, Roles};